#
# Test WMS TIME support for UVRaster with tileindex
#
# REQUIRES: INPUT=GDAL OUTPUT=PNG SUPPORTS=WMS
# 
# RUN_PARMS: wms_uvraster_tileindex_inline.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&BBOX=-90,-180,90,180&CRS=EPSG:4326&WIDTH=400&HEIGHT=200&LAYERS=test_inline_tileindex&STYLES=&FORMAT=image/png" > [RESULT_DEMIME]

# RUN_PARMS: wms_uvraster_tileindex_offline.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&BBOX=-90,-180,90,180&CRS=EPSG:4326&WIDTH=400&HEIGHT=200&LAYERS=test_offline_tileindex&STYLES=&FORMAT=image/png" > [RESULT_DEMIME]

MAP
 NAME uvraster_tileindex
 EXTENT -180 -90 180 90
 MAXSIZE 4096
 SIZE 500 300
 SHAPEPATH ../renderers/data

 PROJECTION
  "init=epsg:4326"
 END

 SYMBOL
  NAME "arrow"
  FILLED TRUE
  POINTS
   1.2 0
   1.2 6
   3 6
   0 10
   -3 6
   -1.2 6
   -1.2 0
   1.2 0
  END
 END

 WEB
  METADATA
    "ows_enable_request" "*"
  END
 END

 LAYER
  NAME "test_inline_tileindex"
  TYPE POINT
  CONNECTIONTYPE uvraster
  TILEINDEX "wind_12.shp"
  TILEITEM "location"

  METADATA
   "wms_timeitem" "timestamp"
   "wms_timeextent" "2025-09-01T00:00:00Z/2025-12-31T00:00:00Z/PT300S"
   "wms_timedefault" "2025-12-15T18:00:00Z"
  END
 
  EXTENT -180 -90 180 90

  PROCESSING "BANDS=1,2"
  PROCESSING "UV_SPACING=40"

  PROJECTION
   "init=epsg:4326"
  END

  CLASS
   STYLE
    SYMBOL "arrow"
    COLOR 255 0 0
    ANGLE [uv_angle]
    SIZE 10
   END
  END

 END
 
 LAYER
   STATUS OFF
   NAME "my_tileindex"
   TYPE POLYGON
   DATA "wind_12.shp"
 END

 LAYER
  NAME "test_offline_tileindex"
  TYPE POINT
  CONNECTIONTYPE uvraster
  TILEINDEX "my_tileindex"

  METADATA
   "wms_timeitem" "timestamp"
   "wms_timeextent" "2025-09-01T00:00:00Z/2025-12-31T00:00:00Z/PT300S"
   "wms_timedefault" "2025-12-15T18:00:00Z"
  END
 
  EXTENT -180 -90 180 90

  PROCESSING "BANDS=1,2"
  PROCESSING "UV_SPACING=40"

  PROJECTION
   "init=epsg:4326"
  END

  CLASS
   STYLE
    SYMBOL "arrow"
    COLOR 255 0 0
    ANGLE [uv_angle]
    SIZE 10
   END
  END

 END
 
END
