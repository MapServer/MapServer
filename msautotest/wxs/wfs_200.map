#
# Test WFS 2.0
#
# REQUIRES: INPUT=OGR SUPPORTS=WFS
#
#
# RUN_PARMS: wfs_200_exception_request_missing.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0" > [RESULT_DEVERSION]
#
# -------------------
# Capabilities : no version
# GET KVP
# RUN_PARMS: wfs_200_caps.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&REQUEST=GetCapabilities" > [RESULT_DEVERSION]
# POST KVP
# RUN_PARMS: wfs_200_caps_post_kvp.xml [MAPSERV] [POST]map=[MAPFILE]&SERVICE=WFS&REQUEST=GetCapabilities[/POST] > [RESULT_DEVERSION]
# POST XML
# RUN_PARMS: wfs_200_caps_post.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetCapabilities service="WFS" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"/>[/POST] > [EXTRACT_SERVICE_VERSION]

# Capabilities : invalid version
# RUN_PARMS: wfs_200_caps_invalid.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=invalid&REQUEST=GetCapabilities" > [RESULT_DEVERSION]

# The XML is invalid in fact : version is not expected
# RUN_PARMS: wfs_200_caps_post_invalid.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetCapabilities service="WFS" version="invalid" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"/>[/POST] > [RESULT_DEVERSION]

# Capabilities : test old-style negotiation
# RUN_PARMS: wfs_200_caps_000.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=0.0.0&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]
# RUN_PARMS: wfs_200_caps_100.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=1.0.0&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]
# RUN_PARMS: wfs_200_caps_105.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=1.0.5&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]
# RUN_PARMS: wfs_200_caps_110.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=1.1.0&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]

# The XML is invalid in fact : version is not expected
# RUN_PARMS: wfs_200_caps_post_version_110.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetCapabilities service="WFS" version="1.1.0" xmlns="http://www.opengis.net/wfs" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"/>[/POST] > [EXTRACT_SERVICE_VERSION]

# RUN_PARMS: wfs_200_caps_115.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=1.1.5&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]
# A.2.1 Version negotiation
# RUN_PARMS: wfs_200_caps_200.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]

# The XML is invalid in fact : version is not expected
# RUN_PARMS: wfs_200_caps_post_version_200.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetCapabilities service="WFS" version="2.0.0" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"/>[/POST] > [EXTRACT_SERVICE_VERSION]

# RUN_PARMS: wfs_200_caps_205.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.5&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]

# undefined behaviour (I think): repeated parameter. We take the first value.
# RUN_PARMS: wfs_200_caps_200_110.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&VERSION=1.1.0&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]

# Capabilities : ACCEPTVERSIONS
# InvalidParameterValue
# RUN_PARMS: wfs_200_caps_acceptversions_foo.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&ACCEPTVERSIONS=foo&REQUEST=GetCapabilities" > [RESULT_DEVERSION]
# VersionNegotiationFailed
# RUN_PARMS: wfs_200_caps_acceptversions_123.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&ACCEPTVERSIONS=1.2.3&REQUEST=GetCapabilities" > [RESULT_DEVERSION]

# RUN_PARMS: wfs_200_caps_acceptversions_200.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&ACCEPTVERSIONS=2.0.0&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]
# RUN_PARMS: wfs_200_caps_acceptversions_110.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&ACCEPTVERSIONS=1.1.0&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]
# RUN_PARMS: wfs_200_caps_post_acceptversions_110.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetCapabilities service="WFS" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ows="http://www.opengis.net/ows/1.1" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/ows/1.1 http://schemas.opengis.net/ows/1.1.0/owsAll.xsd"><ows:AcceptVersions><ows:Version>1.1.0</ows:Version></ows:AcceptVersions></GetCapabilities>[/POST] > [EXTRACT_SERVICE_VERSION]
# RUN_PARMS: wfs_200_caps_acceptversions_200_110.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&ACCEPTVERSIONS=2.0.0,1.1.0&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]
# RUN_PARMS: wfs_200_caps_post_acceptversions_200_110.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetCapabilities service="WFS" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ows="http://www.opengis.net/ows/1.1" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/ows/1.1 http://schemas.opengis.net/ows/1.1.0/owsAll.xsd"><ows:AcceptVersions><ows:Version>2.0.0</ows:Version><ows:Version>1.1.0</ows:Version></ows:AcceptVersions></GetCapabilities>[/POST] > [EXTRACT_SERVICE_VERSION]
# RUN_PARMS: wfs_200_caps_acceptversions_110_200.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&ACCEPTVERSIONS=1.1.0,2.0.0&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]
# RUN_PARMS: wfs_200_caps_post_acceptversions_110_200.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetCapabilities service="WFS" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ows="http://www.opengis.net/ows/1.1" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/ows/1.1 http://schemas.opengis.net/ows/1.1.0/owsAll.xsd"><ows:AcceptVersions><ows:Version>1.1.0</ows:Version><ows:Version>2.0.0</ows:Version></ows:AcceptVersions></GetCapabilities>[/POST] > [EXTRACT_SERVICE_VERSION]
# RUN_PARMS: wfs_200_caps_acceptversions_110_100.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&ACCEPTVERSIONS=1.1.0,1.0.0&REQUEST=GetCapabilities" > [EXTRACT_SERVICE_VERSION]
#
# Version missing
# RUN_PARMS: wfs_200_version_missing.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS" > [RESULT_DEVERSION]
#
# Capabilities updatesequence (less than)
# RUN_PARMS: wfs_200_caps_updatesequence.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetCapabilities&updatesequence=12" > [EXTRACT_SERVICE_VERSION]
# RUN_PARMS: wfs_200_post_caps_updatesequence.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetCapabilities updateSequence="12" service="WFS" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"/>[/POST] > [EXTRACT_SERVICE_VERSION]
#
# Capabilities updatesequence exception (equal)
# RUN_PARMS: wfs_200_exception_updatesequence1.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetCapabilities&updatesequence=123" > [RESULT]
# RUN_PARMS: wfs_200_post_exception_updatesequence1.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetCapabilities updateSequence="123" service="WFS" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"/>[/POST] > [RESULT]
#
# Capabilities updatesequence exception (higher)
# RUN_PARMS: wfs_200_exception_updatesequence2.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetCapabilities&updatesequence=1234" > [RESULT]
#
# Capabilities Sections
# RUN_PARMS: wfs_200_caps_sections_all.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&REQUEST=GetCapabilities&SECTIONS=All" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_caps_sections_service_identification.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&REQUEST=GetCapabilities&SECTIONS=ServiceIdentification" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_caps_sections_service_identification.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetCapabilities service="WFS" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ows="http://www.opengis.net/ows/1.1" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/ows/1.1 http://schemas.opengis.net/ows/1.1.0/owsAll.xsd"><ows:Sections><ows:Section>ServiceIdentification</ows:Section></ows:Sections></GetCapabilities>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_caps_sections_service_provider.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&REQUEST=GetCapabilities&SECTIONS=ServiceProvider" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_caps_sections_operations_metadata.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&REQUEST=GetCapabilities&SECTIONS=OperationsMetadata" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_caps_sections_feature_type_list.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&REQUEST=GetCapabilities&SECTIONS=FeatureTypeList" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_caps_sections_filter_capabilities.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&REQUEST=GetCapabilities&SECTIONS=Filter_Capabilities" > [RESULT_DEVERSION]
#
# -------------------
# Unsupported operation
# RUN_PARMS: wfs_200_unsupported_op.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeatureWithLock" > [RESULT]
# RUN_PARMS: wfs_200_post_unsupportedGetFeatureWithLock.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetFeatureWithLock service="WFS" version="2.0.0" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><StoredQuery id=""/></GetFeatureWithLock>[/POST] > [RESULT]
#
# -------------------
# Unknown operation
# RUN_PARMS: wfs_200_unknown_op.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=foo" > [RESULT]
#
# Test A.2.3 Invalid version number
# RUN_PARMS: wfs_200_invalid_version.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=1.2.3&REQUEST=DescribeFeatureType&TYPENAME=province" > [RESULT]
#
# -------------------
# DescribeFeatureType
#
# No parameters
# RUN_PARMS: wfs_200_describefeaturetype.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=DescribeFeatureType" > [RESULT]
# RUN_PARMS: wfs_200_post_describefeaturetype.xml [MAPSERV] [POST]<?xml version="1.0" ?><DescribeFeatureType service="WFS" version="2.0.0" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"/>[/POST] > [RESULT]
#
# Typename
# RUN_PARMS: wfs_200_describefeaturetype_typename.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=DescribeFeatureType&TYPENAME=province" > [RESULT]
# RUN_PARMS: wfs_200_post_describefeaturetype_typename.xml [MAPSERV] [POST]<?xml version="1.0" ?><DescribeFeatureType service="WFS" version="2.0.0" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><TypeName>province</TypeName></DescribeFeatureType>[/POST] > [RESULT]
# RUN_PARMS: wfs_200_exception_describefeaturetype_illegal_typename.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=DescribeFeatureType&TYPENAME=bla" > [RESULT]
#
# OutputFormat
# RUN_PARMS: wfs_200_describefeaturetype_outputformat_gml32.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=DescribeFeatureType&OUTPUTFORMAT=application%2Fgml%2Bxml%3B%20version%3D3.2" > [RESULT]
# RUN_PARMS: wfs_200_post_describefeaturetype_outputformat_gml32.xml [MAPSERV] [POST]<?xml version="1.0" ?><DescribeFeatureType outputFormat="application/gml+xml; version=3.2" service="WFS" version="2.0.0" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"/>[/POST] > [RESULT]
#
# RUN_PARMS: wfs_200_describefeaturetype_outputformat_gml311.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&OUTPUTFORMAT=text/xml;%20subtype=gml/3.1.1&REQUEST=DescribeFeatureType" > [RESULT]
# RUN_PARMS: wfs_200_post_describefeaturetype_outputformat_gml311.xml [MAPSERV] [POST]<?xml version="1.0" ?><DescribeFeatureType outputFormat="text/xml; subtype=gml/3.1.1" service="WFS" version="2.0.0" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"/>[/POST] > [RESULT]

# RUN_PARMS: wfs_200_describefeaturetype_outputformat_gml212.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=DescribeFeatureType&OUTPUTFORMAT=text/xml;%20subtype=gml/2.1.2" > [RESULT]
# RUN_PARMS: wfs_200_exception_describefeaturetype_outputformat_invalid.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=DescribeFeatureType&OUTPUTFORMAT=invalid" > [RESULT]
#
# -------------------
# GetFeature
#
# Minimum query
# RUN_PARMS: wfs_200_getfeature.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_getfeature.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetFeature service="WFS" version="2.0.0" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><Query typeNames="province"></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
#
# RUN_PARMS: wfs_200_getfeature_hits_with_prefix.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=ms:province&RESULTTYPE=hits" > [RESULT_DEVERSION]
#
# Invalid query: typenames missing (and no resourceid)
# RUN_PARMS: wfs_200_exception_getfeature_no_typenames.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature" > [RESULT_DEVERSION]
#
# OutputFormat
# RUN_PARMS: wfs_200_getfeature_outputformat_gmlxml321.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&OUTPUTFORMAT=application%2Fgml%2Bxml%3B%20version%3D3.2" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_outputformat_gml321.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&OUTPUTFORMAT=text/xml;%20subtype=gml/3.2.1" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_outputformat_gml311.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&OUTPUTFORMAT=text/xml;%20subtype=gml/3.1.1" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_getfeature_outputformat_gml311.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetFeature outputFormat="text/xml; subtype=gml/3.1.1" service="WFS" version="2.0.0" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><Query typeNames="province"></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_outputformat_gml212.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&OUTPUTFORMAT=text/xml;%20subtype=gml/2.1.2" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_getfeature_outputformat.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&OUTPUTFORMAT=foo" > [RESULT_DEVERSION]
#
# ResultType
# RUN_PARMS: wfs_200_getfeature_resulttype_hits.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&RESULTTYPE=hits" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_getfeature_resulttype_hits.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetFeature resultType="hits" service="WFS" version="2.0.0" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><Query typeNames="province"></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
# Check that hits is not sensitive to startIndex
# RUN_PARMS: wfs_200_getfeature_resulttype_hits_startindex.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&RESULTTYPE=hits&STARTINDEX=3" > [RESULT_DEVERSION]
# Sensitivity on count is just on next URL
# RUN_PARMS: wfs_200_getfeature_resulttype_hits_count.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&RESULTTYPE=hits&COUNT=4" > [RESULT_DEVERSION]
#
# Count
# RUN_PARMS: wfs_200_getfeature_count_0.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&COUNT=0" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_count_1.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&COUNT=1" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_getfeature_count_1.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetFeature count="1" service="WFS" version="2.0.0" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><Query typeNames="province"></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_count_100.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&COUNT=100" > [RESULT_DEVERSION]
#
# srsName
# Next 3 requests should be equivalent in result
# RUN_PARMS: wfs_200_getfeature_srsname.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&SRSNAME=EPSG:4269" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_urn_srsname.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&SRSNAME=urn:ogc:def:crs:EPSG::4269" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_getfeature_srsname.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetFeature service="WFS" version="2.0.0" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><Query srsName="EPSG:4269" typeNames="province"></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
#
# RUN_PARMS: wfs_200_exception_getfeature_invalid_srsname.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&SRSNAME=EPSG:9999" > [RESULT_DEVERSION]
#
# Filter BBOX
# Next 6 requests should be equivalent in result
# RUN_PARMS: wfs_200_getfeature_bbox.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&BBOX=43,-67,48,59" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_bbox_with_srs.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&BBOX=43,-67,48,59,EPSG:4326" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_bbox_with_urn_srs.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&BBOX=43,-67,48,59,urn:ogc:def:crs:EPSG::4326" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_bbox_with_crs84_srs.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&BBOX=-67,43,59,48,CRS:84" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_filter_full_bbox.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&FILTER=(<fes:Filter><fes:BBOX><fes:ValueReference>msGeometry</fes:ValueReference><gml:Envelope+srsName=%22urn:ogc:def:crs:EPSG::4326%22><gml:lowerCorner>43%20-67</gml:lowerCorner><gml:upperCorner>48%20-59</gml:upperCorner></gml:Envelope></fes:BBOX></fes:Filter>)" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_getfeature_filter_full_bbox.xml [MAPSERV] [POST]<?xml version="1.0"?><GetFeature service="WFS" version="2.0.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/fes/2.0 http://schemas.opengis.net/filter/2.0/filterAll.xsd http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"><Query typeNames="province"><fes:Filter><fes:BBOX><fes:ValueReference>msGeometry</fes:ValueReference><gml:Envelope srsName="urn:ogc:def:crs:EPSG::4326"><gml:lowerCorner>43 -67</gml:lowerCorner><gml:upperCorner>48 -59</gml:upperCorner></gml:Envelope></fes:BBOX></fes:Filter></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_getfeature_filter_full_bbox_no_srs.xml [MAPSERV] [POST]<?xml version="1.0"?><GetFeature service="WFS" version="2.0.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/fes/2.0 http://schemas.opengis.net/filter/2.0/filterAll.xsd http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"><Query typeNames="province"><fes:Filter><fes:BBOX><fes:ValueReference>msGeometry</fes:ValueReference><gml:Envelope><gml:lowerCorner>43 -67</gml:lowerCorner><gml:upperCorner>48 -59</gml:upperCorner></gml:Envelope></fes:BBOX></fes:Filter></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
# Let's try with GML 3.1.1
# RUN_PARMS: wfs_200_post_getfeature_filter_full_bbox_gml311.xml [MAPSERV] [POST]<?xml version="1.0"?><GetFeature service="WFS" version="2.0.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/base/gml.xsd"><Query typeNames="province"><fes:Filter><fes:BBOX><fes:ValueReference>msGeometry</fes:ValueReference><gml:Envelope srsName="urn:ogc:def:crs:EPSG::4326"><gml:lowerCorner>43 -67</gml:lowerCorner><gml:upperCorner>48 -59</gml:upperCorner></gml:Envelope></fes:BBOX></fes:Filter></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
# And 2.1.2
# RUN_PARMS: wfs_200_post_getfeature_filter_full_bbox_gml212.xml [MAPSERV] [POST]<?xml version="1.0"?><GetFeature service="WFS" version="2.0.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"><Query typeNames="province"><fes:Filter><fes:BBOX><fes:ValueReference>msGeometry</fes:ValueReference><gml:Box srsName="EPSG:4326"><gml:coordinates>43,-67 48,-59</gml:coordinates></gml:Box></fes:BBOX></fes:Filter></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_getfeature_bbox_wrong_number_of_args.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&BBOX=1" > [RESULT_DEVERSION]
#
# Filter and BBOX are exclusive
# RUN_PARMS: wfs_200_exception_getfeature_filter_bbox.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&BBOX=43,-67,48,59&FILTER=foo" > [RESULT_DEVERSION]
# Filter and ResourceId are exclusive
# RUN_PARMS: wfs_200_exception_getfeature_filter_resourceid.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&RESOURCEID=province.977&FILTER=foo" > [RESULT_DEVERSION]
# Filter and Typenames have not same number of values
# RUN_PARMS: wfs_200_exception_getfeature_filter_typenames_different_count.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&FILTER=(foo)(bar)" > [RESULT_DEVERSION]
# Invalid filter
# RUN_PARMS: wfs_200_exception_getfeature_invalid_filter.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&FILTER=foo" > [RESULT_DEVERSION]
#
# FILTER_LANGUAGE optional parameter
# RUN_PARMS: wfs_200_getfeature_filter_language.xml  [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&FILTER_LANGUAGE=urn:ogc:def:query+Language:OGC-FES:Filter&FILTER=(<fes:Filter><fes:BBOX><fes:ValueReference>msGeometry</fes:ValueReference><gml:Envelope+srsName=%22urn:ogc:def:crs:EPSG::4326%22><gml:lowerCorner>0%20-0</gml:lowerCorner><gml:upperCorner>0%20-0</gml:upperCorner></gml:Envelope></fes:BBOX></fes:Filter>)" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_getfeature_filter_language.xml  [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&FILTER_LANGUAGE=invalid&FILTER=(<fes:Filter><fes:BBOX><fes:ValueReference>msGeometry</fes:ValueReference><gml:Envelope+srsName=%22urn:ogc:def:crs:EPSG::4326%22><gml:lowerCorner>0%20-0</gml:lowerCorner><gml:upperCorner>0%20-0</gml:upperCorner></gml:Envelope></fes:BBOX></fes:Filter>)" > [RESULT_DEVERSION]
#
# ResourceId
# RUN_PARMS: wfs_200_getfeature_resourceid.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&RESOURCEID=province.977" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_getfeature_resourceid_disable_layer.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&RESOURCEID=disabled_province.977" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_several_resourceid.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&RESOURCEID=province.977,province.978" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_resourceid_notypenames.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&RESOURCEID=province.977" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeature_resourceid_inexisting.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&RESOURCEID=province.123456" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_getfeature_resourceid_badstructure.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&RESOURCEID=foo" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_getfeature_resourceid_invalid_typename.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&RESOURCEID=foo.123456" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_getfeature_resourceid_filter_invalid_typename.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&FILTER=(<Filter><ResourceId rid='foo.977'/></Filter>)" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_getfeature_resourceid.xml [MAPSERV] [POST]<?xml version="1.0"?><GetFeature service="WFS" version="2.0.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"><Query typeNames="province"><fes:Filter><fes:ResourceId rid="province.977"/></fes:Filter></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_post_getfeature_resourceid_disable_layer.xml [MAPSERV] [POST]<?xml version="1.0"?><GetFeature service="WFS" version="2.0.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"><Query typeNames="disabled_province"><fes:Filter><fes:ResourceId rid="disabled_province.977"/></fes:Filter></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_getfeature_several_resourceid.xml [MAPSERV] [POST]<?xml version="1.0"?><GetFeature service="WFS" version="2.0.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"><Query typeNames="province"><fes:Filter><fes:ResourceId rid="province.977"/><fes:ResourceId rid="province.978"/></fes:Filter></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
#
# Paging support
# "Invalid one" : equivalent to not specifying STARTINDEX at all. Should have a next uri pointing to STARTINDEX=2
# RUN_PARMS: wfs_200_getfeature_startindex_minus1_count2.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&STARTINDEX=-1&COUNT=2" > [RESULT_DEVERSION]
# Valid one, and also equivalent to not specifying STARTINDEX at all. Should have a next uri pointing to STARTINDEX=2
# RUN_PARMS: wfs_200_getfeature_startindex_0_count2.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&STARTINDEX=0&COUNT=2" > [RESULT_DEVERSION]
# Should have a previous uri without STARTINDEX and a next uri pointing to STARTINDEX=3
# RUN_PARMS: wfs_200_getfeature_startindex_1_count2.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&STARTINDEX=1&COUNT=2" > [RESULT_DEVERSION]
# Same with post
# RUN_PARMS: wfs_200_post_getfeature_startindex_1_count2.xml [MAPSERV] [POST]<?xml version="1.0" ?><GetFeature count="2" startIndex="1" service="WFS" version="2.0.0" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><Query typeNames="province"></Query></GetFeature>[/POST] > [RESULT_DEVERSION]
# Should have a previous uri without STARTINDEX and a next uri pointing to STARTINDEX=4
# RUN_PARMS: wfs_200_getfeature_startindex_2_count2.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&STARTINDEX=2&COUNT=2" > [RESULT_DEVERSION]
# Should have a previous uri pointing to STARTINDEX=2 and a next uri pointing to STARTINDEX=6
# RUN_PARMS: wfs_200_getfeature_startindex_4_count2.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&STARTINDEX=4&COUNT=2" > [RESULT_DEVERSION]
# Should have a previous uri pointing to STARTINDEX=17 and no next uri
# RUN_PARMS: wfs_200_getfeature_startindex_19_count2.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&STARTINDEX=19&COUNT=2" > [RESULT_DEVERSION]
# Should return 1 feature, have a previous uri pointing to STARTINDEX=18 and no next uri
# RUN_PARMS: wfs_200_getfeature_startindex_20_count2.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&STARTINDEX=20&COUNT=2" > [RESULT_DEVERSION]
# Should return 0 feature. No previous uri : behaviour not defined in WFS 2.0 spec
# RUN_PARMS: wfs_200_getfeature_startindex_21_count2.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=province&STARTINDEX=21&COUNT=2" > [RESULT_DEVERSION]
#
# -------------------
# ListStoredQueries
#
# RUN_PARMS: wfs_200_liststoredqueries.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=ListStoredQueries" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_liststoredqueries.xml [MAPSERV] [POST]<wfs:ListStoredQueries version="2.0.0" service="WFS" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wfs/2.0" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"/>[/POST] > [RESULT_DEVERSION]
#
# -------------------
# DescribeStoredQueries
#
# RUN_PARMS: wfs_200_describestoredqueries.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=DescribeStoredQueries" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_describestoredqueries_with_id.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=DescribeStoredQueries&STOREDQUERY_ID=urn:ogc:def:query:OGC-WFS::GetFeatureById" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_describestoredqueries_with_invalid_id.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=DescribeStoredQueries&STOREDQUERY_ID=invalidid" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_describestoredqueries.xml [MAPSERV] [POST]<wfs:DescribeStoredQueries version="2.0.0" service="WFS" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wfs/2.0" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"/>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_describestoredqueries_with_id.xml [MAPSERV] [POST]<wfs:DescribeStoredQueries version="2.0.0" service="WFS" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wfs/2.0" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><StoredQueryId>urn:ogc:def:query:OGC-WFS::GetFeatureById</StoredQueryId></wfs:DescribeStoredQueries>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_exception_describestoredqueries_with_invalid_id.xml [MAPSERV] [POST]<wfs:DescribeStoredQueries version="2.0.0" service="WFS" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wfs/2.0" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><StoredQueryId>invalid</StoredQueryId></wfs:DescribeStoredQueries>[/POST] > [RESULT_DEVERSION]
#
# -------------------
# GetFeature with stored query
#
# RUN_PARMS: wfs_200_getfeaturebyid.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&STOREDQUERY_ID=urn:ogc:def:query:OGC-WFS::GetFeatureById&ID=province.977" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeaturebyid_hits.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&STOREDQUERY_ID=urn:ogc:def:query:OGC-WFS::GetFeatureById&ID=province.977&RESULTTYPE=hits" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_getfeaturebyid_count0.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&STOREDQUERY_ID=urn:ogc:def:query:OGC-WFS::GetFeatureById&ID=province.977&COUNT=0" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_getfeaturebyid_nofeature.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&STOREDQUERY_ID=urn:ogc:def:query:OGC-WFS::GetFeatureById&ID=province.12345" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_getfeaturebyid_invalid_id.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&STOREDQUERY_ID=urn:ogc:def:query:OGC-WFS::GetFeatureById&ID=foo" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_getfeaturebyid_no_such_typename.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&STOREDQUERY_ID=urn:ogc:def:query:OGC-WFS::GetFeatureById&ID=foo.12345" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_getfeaturebyid_wrong_queryid.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&STOREDQUERY_ID=foo" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_exception_getfeaturebyid_missing_param.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&STOREDQUERY_ID=urn:ogc:def:query:OGC-WFS::GetFeatureById" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_getfeaturebyid.xml [MAPSERV] [POST]<GetFeature xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0.0" service="WFS" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><StoredQuery id="urn:ogc:def:query:OGC-WFS::GetFeatureById"><Parameter name="ID">province.977</Parameter></StoredQuery></GetFeature>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_exception_getfeaturebyid_missing_queryid.xml [MAPSERV] [POST]<GetFeature xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0.0" service="WFS" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><StoredQuery/></GetFeature>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_exception_getfeaturebyid_wrong_queryid.xml [MAPSERV] [POST]<GetFeature xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0.0" service="WFS" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><StoredQuery id="foo"/></GetFeature>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_exception_getfeaturebyid_missing_param.xml [MAPSERV] [POST]<GetFeature xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0.0" service="WFS" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><StoredQuery id="urn:ogc:def:query:OGC-WFS::GetFeatureById"></StoredQuery></GetFeature>[/POST] > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_exception_getfeaturebyid_invalid_param.xml [MAPSERV] [POST]<GetFeature xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0.0" service="WFS" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><StoredQuery id="urn:ogc:def:query:OGC-WFS::GetFeatureById"><Parameter/></StoredQuery></GetFeature>[/POST] > [RESULT_DEVERSION]
#
# -------------------
# GetPropertyValue with stored query
#
# RUN_PARMS: wfs_200_getpropertyvalue_getfeaturebyid.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetPropertyValue&STOREDQUERY_ID=urn:ogc:def:query:OGC-WFS::GetFeatureById&ID=province.977&VALUEREFERENCE=ms:msGeometry" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_getpropertyvalue_getfeaturebyid.xml [MAPSERV] [POST]<GetPropertyValue service="WFS" version="2.0.0" valueReference="ms:msGeometry" xmlns="http://www.opengis.net/wfs/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd"><StoredQuery id="urn:ogc:def:query:OGC-WFS::GetFeatureById"><Parameter name="ID">province.977</Parameter></StoredQuery></GetPropertyValue>[/POST] > [RESULT_DEVERSION]
#
# -------------------
# SortBy
#
# RUN_PARMS: wfs_200_post_exception_sortby.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAME=province&SORTBY=foo" > [RESULT_DEVERSION]
# RUN_PARMS: wfs_200_post_exception_getpropertyvalue_sortby.xml [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetPropertyValue&TYPENAME=province&SORTBY=foo&VALUEREFERENCE=ms:msGeometry" > [RESULT_DEVERSION]

MAP

NAME WFS_TEST
STATUS ON
SIZE 400 300
#EXTENT   2018000 -73300 3410396 647400
EXTENT -67.5725 42 -58.9275 48.5
UNITS METERS
IMAGECOLOR 255 255 255
SHAPEPATH ./data
SYMBOLSET etc/symbols.sym
FONTSET etc/fonts.txt

#
# Start of web interface definition
#
WEB

 IMAGEPATH "/tmp/ms_tmp/"
 IMAGEURL "/ms_tmp/"

  METADATA
    #"wfs_validate_xml" "true"
    #"wfs_schemas_dir" "SCHEMAS_OPENGIS_NET"
    "wfs_maxfeatures" "1000"
    "wfs_compute_number_matched" "true"
    "ows_updatesequence"   "123"
    "wfs_title"        "Test simple wfs"
    "wfs_onlineresource"   "http://localhost/path/to/wfs_simple?myparam=something&"
    "wfs_srs"          "EPSG:4326 EPSG:4269"
    "ows_abstract"    "Test WFS Abstract"
    "ows_keywordlist" "ogc,wfs,gml,om"
    "ows_service_onlineresource" "http://localhost"
    "ows_fees" "none"
    "ows_accessconstraints" "none"
    "ows_addresstype" "postal"
    "ows_address"     "123 SomeRoad Road"
    "ows_city" "Toronto"
    "ows_stateorprovince" "Ontario"
    "ows_postcode" "xxx-xxx"
    "ows_country" "Canada"
    "ows_contactelectronicmailaddress" "tomkralidis@xxxxxxx.xxx"
    "ows_contactvoicetelephone" "+xx-xxx-xxx-xxxx"
    "ows_contactfacsimiletelephone" "+xx-xxx-xxx-xxxx"
    "ows_contactperson" "Tom Kralidis"
    "ows_contactorganization" "MapServer"
    "ows_contactposition" "self"
    "ows_hoursofservice" "0800h - 1600h EST"
    "ows_contactinstructions" "during hours of service"
    "ows_role" "staff"
    "ows_enable_request" "*" 
  END
END

#
# Start of layer definitions
#



LAYER

  NAME province
  DATA province
  METADATA
    "wfs_title"         "province"
    "wfs_description"   "province"
    "wfs_featureid"     "PROVINCE_I"
    "gml_geometries"    "msGeometry"
    "gml_msGeometry_type" "polygon"
  END
  TYPE POINT
  STATUS ON
  PROJECTION
    "init=./data/epsg2:42304"
#    "init=epsg:42304"
  END

  CLASSITEM "Name_e"

  CLASS
    NAME "Province"
    COLOR 200 255 0
    OUTLINECOLOR 120 120 120
  END
END # Layer



LAYER
  NAME disabled_province
  DATA province
  METADATA
    "wfs_title"         "province"
    "wfs_description"   "province"
    "wfs_featureid"     "PROVINCE_I"
    "gml_geometries"    "msGeometry"
    "gml_msGeometry_type" "polygon"
    "wfs_enable_request" "!*" 
  END
  TYPE POINT
  STATUS ON
  PROJECTION
    "init=./data/epsg2:42304"
#    "init=epsg:42304"
  END

  CLASSITEM "Name_e"

  CLASS
    NAME "Province"
    COLOR 200 255 0
    OUTLINECOLOR 120 120 120
  END
END # Layer

END # Map File
