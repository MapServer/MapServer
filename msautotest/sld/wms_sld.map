#
# Test WMS SLD
#
# REQUIRES: INPUT=GDAL OUTPUT=PNG SUPPORTS=WMS
#
#
# --- Styling without SLD: five pixels wide semi opaque yellow line
# RUN_PARMS: map_w5o05cy.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy" > [RESULT_DEMIME]
#
# --- Styling without SLD: five pixels wide semi opaque yellow line
#                          semi opaque blue circle plot with one pixel wide red line
# RUN_PARMS: map_w5o05cy_w1o05cbrs10.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy,w1o05cbrs10" > [RESULT_DEMIME]
#
# --- Styling without SLD: five pixels wide semi opaque yellow outer line
#                          cyan inner polygon with one pixel wide semi opaque magenta line
# RUN_PARMS: map_w5o05cy_w1o05cmc.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy,w1o05cmc" > [RESULT_DEMIME]
#
# --- Styling with SLD as of MapServer 7.2: five pixels wide semi opaque yellow line
# RUN_PARMS: s72_w5o05cy.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>5</SvgParameter><SvgParameter name=%22stroke-opacity%22>0.5</SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#
# --- Styling with SLD as of MapServer 7.2: five pixels wide semi opaque yellow line
#                          semi opaque blue circle plot with one pixel wide red line
# RUN_PARMS: s72_w5o05cy_w1o05cbrs10.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy,w1o05cbrs10&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>5</SvgParameter><SvgParameter name=%22stroke-opacity%22>0.5</SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer><NamedLayer><Name>w1o05cbrs10</Name><UserStyle><FeatureTypeStyle><Rule><PointSymbolizer><Graphic><Mark><WellKnownName>circle</WellKnownName><Fill><SvgParameter name=%22fill%22>#0000FF</SvgParameter><SvgParameter name=%22fill-opacity%22>0.1</SvgParameter></Fill><Stroke><SvgParameter name=%22stroke%22>#FF0000</SvgParameter><SvgParameter name=%22stroke-opacity%22>1</SvgParameter><SvgParameter name=%22stroke-width%22>1</SvgParameter></Stroke></Mark><Size>10</Size><Opacity>0.5</Opacity></Graphic></PointSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#
# --- Styling with SLD as of MapServer 7.2: five pixels wide semi opaque yellow outer line
#                          cyan inner polygon with one pixel wide semi opaque magenta line
# RUN_PARMS: s72_w5o05cy_w1o05cmc.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy,w1o05cmc&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>5</SvgParameter><SvgParameter name=%22stroke-opacity%22>0.5</SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer><NamedLayer><Name>w1o05cmc</Name><UserStyle><FeatureTypeStyle><Rule><PolygonSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>1</SvgParameter><SvgParameter name=%22stroke-opacity%22>0.5</SvgParameter><SvgParameter name=%22stroke%22>#FF00FF</SvgParameter></Stroke><Fill><SvgParameter name=%22fill-opacity%22>0.5</SvgParameter><SvgParameter name=%22fill%22>#00FFFF</SvgParameter></Fill></PolygonSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#
# --- Styling with SLD: five pixels wide semi opaque yellow line
#       <SvgParameter name="stroke-width"><Literal>
# RUN_PARMS: sld_wl5o05cy.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22><Literal>5</Literal></SvgParameter><SvgParameter name=%22stroke-opacity%22>0.5</SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#
# --- Styling with SLD: five pixels wide semi opaque yellow line
#       <SvgParameter name="stroke-width"><PropertyName>
# RUN_PARMS: sld_wp5o05cy.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22><PropertyName>w5</PropertyName></SvgParameter><SvgParameter name=%22stroke-opacity%22>0.5</SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#
# --- Styling with SLD: five pixels wide semi opaque yellow line
#       <SvgParameter name="stroke-opacity"><Literal>
# RUN_PARMS: sld_w5ol05cy.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>5</SvgParameter><SvgParameter name=%22stroke-opacity%22><Literal>0.5</Literal></SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#
# --- Styling with SLD: five pixels wide semi opaque yellow line
#       <SvgParameter name="stroke-opacity"><PropertyName>
# RUN_PARMS: sld_w5op05cy.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>5</SvgParameter><SvgParameter name=%22stroke-opacity%22><PropertyName>semiopaque</PropertyName></SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#
# --- Styling with SLD: five pixels wide semi opaque yellow outer line
#                       semi opaque blue circle plot with one pixel wide red line
#       <Opacity><Literal>
# RUN_PARMS: sld_w5o05cy_w1ol05cbrs10.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy,w1o05cbrs10&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>5</SvgParameter><SvgParameter name=%22stroke-opacity%22>0.5</SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer><NamedLayer><Name>w1o05cbrs10</Name><UserStyle><FeatureTypeStyle><Rule><PointSymbolizer><Graphic><Mark><WellKnownName>circle</WellKnownName><Fill><SvgParameter name=%22fill%22>#0000FF</SvgParameter><SvgParameter name=%22fill-opacity%22>0.1</SvgParameter></Fill><Stroke><SvgParameter name=%22stroke%22>#FF0000</SvgParameter><SvgParameter name=%22stroke-opacity%22>1</SvgParameter><SvgParameter name=%22stroke-width%22>1</SvgParameter></Stroke></Mark><Size>10</Size><Opacity><Literal>0.5</Literal></Opacity></Graphic></PointSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#
# --- Styling with SLD: five pixels wide semi opaque yellow outer line
#                       semi opaque blue circle plot with one pixel wide red line
#       <Opacity><PropertyName>
# RUN_PARMS: sld_w5o05cy_w1op05cbrs10.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy,w1o05cbrs10&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>5</SvgParameter><SvgParameter name=%22stroke-opacity%22>0.5</SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer><NamedLayer><Name>w1o05cbrs10</Name><UserStyle><FeatureTypeStyle><Rule><PointSymbolizer><Graphic><Mark><WellKnownName>circle</WellKnownName><Fill><SvgParameter name=%22fill%22>#0000FF</SvgParameter><SvgParameter name=%22fill-opacity%22>0.1</SvgParameter></Fill><Stroke><SvgParameter name=%22stroke%22>#FF0000</SvgParameter><SvgParameter name=%22stroke-opacity%22>1</SvgParameter><SvgParameter name=%22stroke-width%22>1</SvgParameter></Stroke></Mark><Size>10</Size><Opacity><PropertyName>semiopaque</PropertyName></Opacity></Graphic></PointSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#
# --- Styling with SLD: five pixels wide semi opaque yellow outer line
#                       cyan inner polygon with one pixel wide semi opaque magenta line
#       <SvgParameter name="stroke-opacity"><Literal>
# RUN_PARMS: sld_w5o05cy_w1ol05cmc.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy,w1o05cmc&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>5</SvgParameter><SvgParameter name=%22stroke-opacity%22>0.5</SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer><NamedLayer><Name>w1o05cmc</Name><UserStyle><FeatureTypeStyle><Rule><PolygonSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>1</SvgParameter><SvgParameter name=%22stroke-opacity%22><Literal>0.5</Literal></SvgParameter><SvgParameter name=%22stroke%22>#FF00FF</SvgParameter></Stroke><Fill><SvgParameter name=%22fill-opacity%22>0.5</SvgParameter><SvgParameter name=%22fill%22>#00FFFF</SvgParameter></Fill></PolygonSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#
# --- Styling with SLD: five pixels wide semi opaque yellow outer line
#                       cyan inner polygon with one pixel wide semi opaque magenta line
#       <SvgParameter name="stroke-opacity"><PropertyName>
# RUN_PARMS: sld_w5o05cy_w1op05cmc.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy,w1o05cmc&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>5</SvgParameter><SvgParameter name=%22stroke-opacity%22>0.5</SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer><NamedLayer><Name>w1o05cmc</Name><UserStyle><FeatureTypeStyle><Rule><PolygonSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>1</SvgParameter><SvgParameter name=%22stroke-opacity%22><PropertyName>semiopaque</PropertyName></SvgParameter><SvgParameter name=%22stroke%22>#FF00FF</SvgParameter></Stroke><Fill><SvgParameter name=%22fill-opacity%22>0.5</SvgParameter><SvgParameter name=%22fill%22>#00FFFF</SvgParameter></Fill></PolygonSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#
# --- Styling with SLD: five pixels wide semi opaque yellow line
#                       semi opaque blue circle plot with one pixel wide red line
#       <SvgParameter name="stroke-width"><Literal>
# RUN_PARMS: sld_w5o05cy_wl1o05cbrs10.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy,w1o05cbrs10&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>5</SvgParameter><SvgParameter name=%22stroke-opacity%22>0.5</SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer><NamedLayer><Name>w1o05cbrs10</Name><UserStyle><FeatureTypeStyle><Rule><PointSymbolizer><Graphic><Mark><WellKnownName>circle</WellKnownName><Fill><SvgParameter name=%22fill%22>#0000FF</SvgParameter><SvgParameter name=%22fill-opacity%22>0.1</SvgParameter></Fill><Stroke><SvgParameter name=%22stroke%22>#FF0000</SvgParameter><SvgParameter name=%22stroke-opacity%22>1</SvgParameter><SvgParameter name=%22stroke-width%22><Literal>1</Literal></SvgParameter></Stroke></Mark><Size>10</Size><Opacity>0.5</Opacity></Graphic></PointSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#
# --- Styling with SLD: five pixels wide semi opaque yellow line
#                       semi opaque blue circle plot with one pixel wide red line
#       <SvgParameter name="stroke-width"><PropertyName>
# RUN_PARMS: sld_w5o05cy_wp1o05cbrs10.png [MAPSERV] QUERY_STRING="map=[MAPFILE]&SERVICE=WMS&VERSION=1.3&REQUEST=GetMap&CRS=EPSG:4326&BBOX=42,-5,52,9&FORMAT=image/png&WIDTH=200&HEIGHT=200&LAYERS=w5o05cy,w1o05cbrs10&SLD_BODY=<StyledLayerDescriptor version=%221.1.0%22><NamedLayer><Name>w5o05cy</Name><UserStyle><FeatureTypeStyle><Rule><LineSymbolizer><Stroke><SvgParameter name=%22stroke-width%22>5</SvgParameter><SvgParameter name=%22stroke-opacity%22>0.5</SvgParameter><SvgParameter name=%22stroke%22>#FFFF00</SvgParameter></Stroke></LineSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer><NamedLayer><Name>w1o05cbrs10</Name><UserStyle><FeatureTypeStyle><Rule><PointSymbolizer><Graphic><Mark><WellKnownName>circle</WellKnownName><Fill><SvgParameter name=%22fill%22>#0000FF</SvgParameter><SvgParameter name=%22fill-opacity%22>0.1</SvgParameter></Fill><Stroke><SvgParameter name=%22stroke%22>#FF0000</SvgParameter><SvgParameter name=%22stroke-opacity%22>1</SvgParameter><SvgParameter name=%22stroke-width%22><PropertyName>w1</PropertyName></SvgParameter></Stroke></Mark><Size>10</Size><Opacity>0.5</Opacity></Graphic></PointSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>" > [RESULT_DEMIME]
#



MAP

NAME WMS_SLD
SHAPEPATH ./data
SIZE 300 300
IMAGECOLOR 100 100 100
PROJECTION
   "init=epsg:4326"
END
WEB
  IMAGEPATH "/tmp/ms_tmp/"
  IMAGEURL "/ms_tmp/"
  METADATA
    "wms_title"		   "Test SLD"
    "wms_onlineresource"   "http://localhost/path/to/wms_simple?"
    "wms_srs"		   "EPSG:4326"
    "ows_schemas_location" "http://ogc.dmsolutions.ca"
    "ows_enable_request" "*" 
    "ows_sld_enabled" "true"
  END
END

LAYER
  NAME w5o05cy
  DATA hexagon
  TYPE LINE
  STATUS ON
  SIZEUNITS pixels
  CLASS
    STYLE
      WIDTH 5
      OPACITY 50
      COLOR 255 255 0
    END
  END
END

LAYER
  NAME w1o05cmc
  DATA inner
  TYPE POLYGON
  STATUS ON
  SIZEUNITS pixels
  CLASS
    STYLE
      WIDTH 1
      OPACITY 50
      COLOR 0 255 255
      OUTLINECOLOR 255 0 255
    END
  END
END

LAYER
  NAME w1o05cbrs10
  DATA plot
  TYPE POINT
  STATUS ON
  SIZEUNITS pixels
  CLASS
    STYLE
      COLOR 0 0 255
      OUTLINECOLOR 255 0 0
      OPACITY 50
      SYMBOL "circle"
      SIZE 10
    END
  END
END

SYMBOL
  NAME "circle"
  TYPE ellipse
  FILLED true
  POINTS
    1 1
  END
END

END
