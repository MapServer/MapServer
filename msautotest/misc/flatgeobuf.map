#
# Test FlatGeobuf native access (RFC 137)
#
# REQUIRES: INPUT=FLATGEOBUF
#
#RUN_PARMS: flatgeobuf-continent.png [MAP2IMG] -m [MAPFILE] -i png -o [RESULT] -l africa-continent
#RUN_PARMS: flatgeobuf-classes.png [MAP2IMG] -m [MAPFILE] -i png -o [RESULT] -l africa-classes

MAP
  NAME "fgb-test"
  STATUS ON
  SIZE 400 300
  EXTENT -17.625043 -34.819166 51.133870 37.349994
  UNITS DD
  IMAGECOLOR 255 255 255
  IMAGETYPE png

  WEB
    METADATA
      "wfs_title"          "Test FlatGeobuf WFS output"
      "wfs_abstract"       "Longer text describing the FlatGeobuf WFS service."
      "wfs_onlineresource" "http://localhost/path/to/flatgeobuf?"
      "wfs_srs"            "EPSG:4326 EPSG:4269 EPSG:3978 EPSG:3857"
      "wfs_enable_request" "*"
    END
  END
  
  PROJECTION
    "init=epsg:4326"
  END  

  /* Africa Continent */
  LAYER
    NAME "africa-continent"
    METADATA
      "wfs_title"         "Africa Continent"
      "wfs_srs"           "EPSG:4326"
      "gml_include_items" "all"
      "gml_featureid"     "id"
      "gml_types"         "auto"
      "wfs_enable_request" "*"
      "wfs_use_default_extent_for_getfeature" "false"
    END    
    TYPE POLYGON
    STATUS ON
    CONNECTIONTYPE flatgeobuf
    DATA "data/africa.fgb"
    CLASS
      NAME "Africa Continent"
      STYLE
        COLOR 50 50 50
        OUTLINECOLOR 120 120 120
      END #style   
    END #class
    PROJECTION
      "init=epsg:4326"
    END  
  END # layer
  
  /* Africa classes */
  LAYER
    NAME "africa-classes"
    METADATA
      "wfs_title"         "Africa Classes"
      "wfs_srs"           "EPSG:4326"
      "gml_include_items" "all"
      "gml_featureid"     "id"
      "gml_types"         "auto"
      "wfs_enable_request" "*"
      "wfs_use_default_extent_for_getfeature" "false"
    END    
    TYPE POLYGON
    STATUS ON
    CONNECTIONTYPE flatgeobuf
    DATA "data/africa.fgb"
    CLASSITEM "name_en"   
    CLASS
      NAME "Tanzania"
      EXPRESSION "Tanzania"
      STYLE
        COLOR 100 223 69
        OUTLINECOLOR 120 120 120
      END #style   
    END #class
    CLASS
      NAME "Kenya"
      EXPRESSION "Kenya"
      STYLE
        COLOR 120 220 123
        OUTLINECOLOR 120 120 120
      END #style   
    END #class    
    TEMPLATE "ttt.html"
    CLASS
      NAME "Zambia"
      EXPRESSION "Zambia"
      STYLE
        COLOR 37 234 224
        OUTLINECOLOR 120 120 120
      END #style   
    END #class    
    TEMPLATE "ttt.html"
    PROJECTION
      "init=epsg:4326"
    END 
  END # layer  

END # map
